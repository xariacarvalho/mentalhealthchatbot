<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buddy Chat - Your Friendly Listener</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', 'Comic Sans', cursive;
            background: #e8eef3;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            line-height: 1.8;
            letter-spacing: 0.5px;
        }

        .container {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 20px;
            max-width: 1400px;
            width: 100%;
            height: 90vh;
            max-height: 900px;
        }

        .chat-section {
            background: white;
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .header {
            background: #6b7c93;
            color: white;
            padding: 25px 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 8px;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            background: #f9fafb;
        }

        .message {
            margin-bottom: 25px;
            animation: slideIn 0.4s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(15px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            text-align: right;
        }

        .message-bubble {
            display: inline-block;
            max-width: 75%;
            padding: 18px 22px;
            border-radius: 20px;
            font-size: 1.15rem;
            word-spacing: 3px;
        }

        .message.user .message-bubble {
            background: #6b7c93;
            color: white;
            border-bottom-right-radius: 5px;
        }

        .message.bot .message-bubble {
            background: white;
            color: #333;
            border: 3px solid #e0e7ff;
            border-bottom-left-radius: 5px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .bot-avatar {
            display: none;
        }

        .input-area {
            padding: 25px;
            background: white;
            border-top: 3px solid #e5e7eb;
        }

        .input-container {
            display: flex;
            gap: 12px;
        }

        #userInput {
            flex: 1;
            padding: 16px 20px;
            font-size: 1.15rem;
            border: 3px solid #d1d5db;
            border-radius: 20px;
            font-family: 'Comic Sans MS', 'Comic Sans', cursive;
            letter-spacing: 0.5px;
            line-height: 1.6;
        }

        #userInput:focus {
            outline: none;
            border-color: #6b7c93;
            box-shadow: 0 0 0 4px rgba(107, 124, 147, 0.1);
        }

        #sendButton {
            padding: 16px 32px;
            background: #6b7c93;
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 1.15rem;
            font-weight: bold;
            cursor: pointer;
            font-family: 'Comic Sans MS', 'Comic Sans', cursive;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 12px rgba(107, 124, 147, 0.3);
        }

        #sendButton:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(107, 124, 147, 0.4);
        }

        #sendButton:active {
            transform: translateY(0);
        }

        #sendButton:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .resources-panel {
            background: white;
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            padding: 30px;
            overflow-y: auto;
        }

        .resources-panel h2 {
            color: #6b7c93;
            font-size: 1.8rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .resource-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f0f4f8;
            border-radius: 20px;
            border: 3px solid #d9e2ec;
        }

        .resource-section h3 {
            color: #5a6c7d;
            font-size: 1.3rem;
            margin-bottom: 15px;
        }

        .resource-item {
            margin-bottom: 18px;
            padding: 15px;
            background: white;
            border-radius: 15px;
            border-left: 5px solid #6b7c93;
            transition: transform 0.2s;
        }

        .resource-item:hover {
            transform: translateX(5px);
        }

        .resource-item strong {
            color: #4a5568;
            display: block;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .resource-item a {
            color: #6b7c93;
            text-decoration: none;
            font-weight: bold;
            word-break: break-word;
        }

        .resource-item a:hover {
            text-decoration: underline;
        }

        .tip-box {
            background: #fef5e7;
            border: 3px solid #f9e5c4;
            border-radius: 15px;
            padding: 18px;
            margin-top: 15px;
        }

        .tip-box strong {
            color: #9b6b3d;
            display: block;
            margin-bottom: 8px;
            font-size: 1.15rem;
        }

        /* Removed loading animation */

        @media (max-width: 1024px) {
            .container {
                grid-template-columns: 1fr;
                grid-template-rows: 1fr auto;
                height: auto;
                max-height: none;
            }

            .resources-panel {
                max-height: 400px;
            }
        }

        /* High contrast mode for better readability */
        .message-bubble {
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="chat-section">
            <div class="header">
                <h1>Hi Friend!</h1>
                <p>Your feelings matter. Talk freely without judgment. We're here whenever you need support.</p>
            </div>
            <div class="chat-messages" id="chatMessages">
            </div>
            <div class="input-area">
                <div class="input-container">
                    <input 
                        type="text" 
                        id="userInput" 
                        placeholder="Type your message here..."
                        autocomplete="off"
                    >
                    <button id="sendButton">Send</button>
                </div>
            </div>
        </div>

        <div class="resources-panel">
            <h2>Help & Resources</h2>
            
            <div class="resource-section">
                <h3>Need Help Now?</h3>
                <div class="resource-item">
                    <strong>Crisis Text Line</strong>
                    Text HOME to 741741
                    <br>Free 24/7 support
                </div>
                <div class="resource-item">
                    <strong>Kids Help Phone</strong>
                    Call: 1-800-668-6868
                    <br>Text: 686868
                </div>
                <div class="resource-item">
                    <strong>National Suicide Prevention</strong>
                    Call or Text: 988
                    <br>Available 24/7
                </div>
            </div>

            <div class="resource-section">
                <h3>Helpful Websites</h3>
                <div class="resource-item">
                    <strong>KidsHealth</strong>
                    <a href="https://kidshealth.org/en/kids/center/feelings-center.html" target="_blank">
                        kidshealth.org
                    </a>
                    <br>Info about feelings
                </div>
                <div class="resource-item">
                    <strong>Childline</strong>
                    <a href="https://www.childline.org.uk" target="_blank">
                        childline.org.uk
                    </a>
                    <br>Support for kids
                </div>
                <div class="resource-item">
                    <strong>Young Minds</strong>
                    <a href="https://www.youngminds.org.uk" target="_blank">
                        youngminds.org.uk
                    </a>
                    <br>Mental health help
                </div>
            </div>

            <div class="tip-box">
                <strong>Remember</strong>
                • It's OK to feel your feelings
                <br>• Talking helps
                <br>• You are not alone
                <br>• You are important
                <br>• Things can get better
            </div>

            <div class="resource-section">
                <h3>Feel Better Activities</h3>
                <div class="resource-item">
                    <strong>Try These:</strong>
                    • Draw or color
                    <br>• Listen to music
                    <br>• Go for a walk
                    <br>• Talk to a pet
                    <br>• Deep breathing
                    <br>• Write in a journal
                </div>
            </div>
        </div>
    </div>

    <script>
        const chatMessages = document.getElementById('chatMessages');
        const userInput = document.getElementById('userInput');
        const sendButton = document.getElementById('sendButton');

        // Response patterns for the chatbot
        const responses = {
            greetings: [
                "Hi there! I'm glad you're here. How are you feeling today?",
                "Hello! It's nice to meet you. What's on your mind?",
                "Hey! Thanks for reaching out. I'm here to listen."
            ],
            sad: [
                "I hear that you're feeling sad. That must be really hard. Do you want to talk about what's making you feel this way?",
                "It's okay to feel sad. Your feelings are important. Would you like to share what's bothering you?",
                "Feeling sad is tough. I'm here to listen. What's going on?"
            ],
            anxious: [
                "It sounds like you're feeling worried or anxious. That can be really uncomfortable. Would it help to talk about what's on your mind?",
                "Anxiety can feel overwhelming. You're not alone. Can you tell me more about what's worrying you?",
                "I understand that feeling anxious is hard. Let's take it one step at a time. What's making you feel this way?"
            ],
            angry: [
                "I can tell you're feeling angry. It's okay to feel that way. Do you want to talk about what happened?",
                "Anger is a normal feeling. I'm here to listen without judging. What's making you upset?",
                "Feeling angry can be really intense. I'm here for you. Would you like to share what's bothering you?"
            ],
            scared: [
                "It sounds like you're feeling scared. That must be really difficult. Do you want to talk about what's frightening you?",
                "Being scared is a valid feeling. I'm here to support you. Can you tell me more about what's scaring you?",
                "I hear that you're afraid. You're safe here. Would it help to talk about it?"
            ],
            stressed: [
                "It sounds like you're feeling stressed. That can be really overwhelming. What's causing the stress?",
                "Stress can be tough to handle. I'm here to listen. Do you want to share what's stressing you out?",
                "I understand that stress can feel like a lot. Let's talk about it. What's going on?"
            ],
            lonely: [
                "Feeling lonely is really hard. I want you to know that you're not alone. I'm here with you.",
                "Loneliness can be painful. Thank you for reaching out. Would you like to talk about how you're feeling?",
                "I hear that you're feeling lonely. That takes courage to share. I'm here to listen."
            ],
            good: [
                "I'm so glad to hear you're feeling good! That's wonderful. What's making you feel happy?",
                "That's great! It's nice to hear you're doing well. What's been going well for you?",
                "I'm happy you're feeling good! Would you like to share what's been positive?"
            ],
            school: [
                "School can be challenging sometimes. What's going on at school that you'd like to talk about?",
                "I'm here to listen about school stuff. Is something bothering you there?",
                "School can bring up a lot of feelings. Do you want to share what's happening?"
            ],
            friends: [
                "Friends are important. What's going on with your friends?",
                "Friendships can be complicated. I'm here to listen. What would you like to share?",
                "It sounds like something is happening with friends. Do you want to talk about it?"
            ],
            family: [
                "Family stuff can be tough. I'm here to listen. What's going on at home?",
                "Family situations can bring up big feelings. Would you like to talk about it?",
                "I hear you. Family matters can be hard. What would you like to share?"
            ],
            help: [
                "If you're in a crisis or need immediate help, please reach out to Crisis Text Line by texting HOME to 741741, or call 988. These are free services available 24/7.",
                "I'm here to support you, but if you need urgent help, please text HOME to 741741 or call 988. You can also talk to a trusted adult.",
                "Your safety is important. For immediate help, text HOME to 741741 or call 988. I'm also here to listen."
            ],
            crisis: [
                "I'm really concerned about what you're sharing. Please reach out to Crisis Text Line right now by texting HOME to 741741, or call 988. These people are trained to help. You can also talk to a trusted adult. Your life matters.",
                "What you're going through sounds very serious. Please get help immediately by texting HOME to 741741 or calling 988. I care about you and want you to be safe.",
                "I'm worried about you. Please contact Crisis Text Line at 741741 or call 988 right away. You deserve support from someone who can really help. Please reach out now."
            ],
            thanks: [
                "You're welcome! I'm here whenever you need to talk.",
                "I'm glad I could help. Remember, I'm always here to listen.",
                "You're very welcome! Feel free to come back anytime you need support."
            ],
            default: [
                "I'm listening. Can you tell me more about that?",
                "Thank you for sharing. How does that make you feel?",
                "I hear you. Would you like to talk more about this?",
                "That sounds important. Can you tell me more?",
                "I'm here for you. What else is on your mind?"
            ]
        };

        function addMessage(text, isUser) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;
            
            const bubble = document.createElement('div');
            bubble.className = 'message-bubble';
            bubble.textContent = text;
            messageDiv.appendChild(bubble);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function getBotResponse(userMessage) {
            const message = userMessage.toLowerCase();
            
            // Crisis keywords - highest priority
            if (message.includes('kill myself') || message.includes('suicide') || 
                message.includes('end my life') || message.includes('want to die') ||
                message.includes('hurt myself') || message.includes('self harm')) {
                return getRandomResponse('crisis');
            }
            
            // Help keywords
            if (message.includes('help') || message.includes('crisis') || message.includes('emergency')) {
                return getRandomResponse('help');
            }
            
            // Greetings
            if (message.match(/\b(hi|hello|hey|good morning|good afternoon)\b/)) {
                return getRandomResponse('greetings');
            }
            
            // Emotions
            if (message.match(/\b(sad|depressed|down|unhappy|upset)\b/)) {
                return getRandomResponse('sad');
            }
            if (message.match(/\b(anxious|worried|nervous|anxiety|scared|afraid|fear)\b/)) {
                return getRandomResponse('anxious');
            }
            if (message.match(/\b(angry|mad|furious|frustrated)\b/)) {
                return getRandomResponse('angry');
            }
            if (message.match(/\b(stressed|overwhelmed|pressure)\b/)) {
                return getRandomResponse('stressed');
            }
            if (message.match(/\b(lonely|alone|isolated)\b/)) {
                return getRandomResponse('lonely');
            }
            if (message.match(/\b(good|great|happy|wonderful|amazing|better)\b/)) {
                return getRandomResponse('good');
            }
            
            // Topics
            if (message.match(/\b(school|class|teacher|homework|test|exam)\b/)) {
                return getRandomResponse('school');
            }
            if (message.match(/\b(friend|friends|peer)\b/)) {
                return getRandomResponse('friends');
            }
            if (message.match(/\b(family|mom|dad|parent|sibling|brother|sister)\b/)) {
                return getRandomResponse('family');
            }
            
            // Thanks
            if (message.match(/\b(thank|thanks|appreciate)\b/)) {
                return getRandomResponse('thanks');
            }
            
            // Default responses
            return getRandomResponse('default');
        }

        function getRandomResponse(category) {
            const responseList = responses[category] || responses.default;
            return responseList[Math.floor(Math.random() * responseList.length)];
        }

        async function handleSend() {
            const message = userInput.value.trim();
            if (!message) return;

            // Add user message
            addMessage(message, true);
            userInput.value = '';
            
            // Disable input while processing
            sendButton.disabled = true;
            userInput.disabled = true;
            
            // Small delay to feel more natural
            await new Promise(resolve => setTimeout(resolve, 500));
            
            // Get bot response
            const response = getBotResponse(message);
            addMessage(response, false);
            
            // Re-enable input
            sendButton.disabled = false;
            userInput.disabled = false;
            userInput.focus();
        }

        sendButton.addEventListener('click', handleSend);
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleSend();
            }
        });

        // Focus input on load
        userInput.focus();
    </script>
</body>
</html>
